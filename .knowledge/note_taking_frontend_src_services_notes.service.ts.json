{"is_source_file": true, "format": "TypeScript", "description": "This file defines a NotesRepository class for managing notes stored in localStorage, optionally integrated with an external API base URL. It includes interface definitions for Note objects, utility functions for ID generation and API base URL retrieval, and public methods for CRUD operations on notes.", "external_files": ["@builder.io/qwik"], "external_methods": ["isServer"], "published": ["Note", "CreateNoteInput", "notesRepo"], "classes": [{"name": "NotesRepository", "description": "A class providing methods to list, get, create, update, and delete notes stored locally or via an API."}], "methods": [{"name": "function getApiBase(): string | undefined { getApiBase", "description": "Retrieves the API base URL from environment variables, preferring VITE_API_BASE over VITE_BACKEND_URL.", "scope": "", "scopeKind": ""}, {"name": "function uid(): string { uid", "description": "Generates a simple unique identifier based on current time and randomness.", "scope": "", "scopeKind": ""}, {"name": "safeReadAll", "description": "Safely reads all notes from localStorage, returning an empty array if any error occurs."}, {"name": "safeWriteAll", "description": "Safely writes the provided notes array to localStorage."}, {"name": "list", "description": "Returns all notes, optionally filtered by a search query."}, {"name": "get", "description": "Retrieves a note by its ID."}, {"name": "create", "description": "Creates a new note with optional title and content, assigns an ID, and stores it."}, {"name": "update", "description": "Updates a note by ID with provided partial fields."}, {"name": "remove", "description": "Deletes a note by ID, returning true if deletion was successful."}], "calls": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "Date.now()"], "search-terms": ["notes.repository", "local storage", "Note entity", "getApiBase", "NotesRepository"], "state": 2, "file_id": 19, "knowledge_revision": 39, "git_revision": "", "ctags": [{"_type": "tag", "name": "CreateNoteInput", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^type CreateNoteInput = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^export interface Note {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "NotesRepository", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^export class NotesRepository {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^const STORAGE_KEY = \"notes.app.items.v1\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^      const arr = JSON.parse(raw) as Note[];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^  const base = (import.meta as any).env?.VITE_API_BASE || (import.meta as any).env?.VITE_BACKEND/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^  content: string;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^  createdAt: number;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^function getApiBase(): string | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^  id: string;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^      ...items[idx],$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    const idx = items.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    const items = this.safeReadAll();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    let items = this.safeReadAll().sort((a, b) => b.updatedAt - a.updatedAt);$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "newNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    const newNote: Note = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    const next = items.filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "notesRepo", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^export const notesRepo = new NotesRepository();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    const now = Date.now();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^      const q = query.trim().toLowerCase();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^      const raw = localStorage.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^  title: string;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^function uid(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^    const updated: Note = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^      updatedAt: Date.now(),$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-app-42745-42754/note_taking_frontend/src/services/notes.service.ts", "pattern": "/^  updatedAt: number;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}], "hash": "e1437b2b6ae680d18b44e23ac3df2ab7", "format-version": 4, "code-base-name": "note_taking_frontend", "filename": "note_taking_frontend/src/services/notes.service.ts", "fields": [{"name": "export interface Note {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "content: string;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "createdAt: number;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "id: string;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "let items = this.safeReadAll().sort((a, b) => b.updatedAt - a.updatedAt);", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "title: string;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "updatedAt: number;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}], "revision_history": [{"39": ""}]}